(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-054326e6"],{"0e8f":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l}));var r=n("b775");function a(){return Object(r["a"])({url:"/dept/getDeptTree",method:"get"})}function o(e){return Object(r["a"])({url:"/dept/sysDeptInsert",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/dept/sysDeptUpdate ",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/dept/sysDeptDelete",method:"get",params:{ids:e}})}function l(e){return Object(r["a"])({url:"/dept/SysDeptQuery",method:"get",params:e})}},"8c77":function(e,t,n){"use strict";n("a59e")},a314:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-container"},[n("el-card",{staticStyle:{"margin-top":"-20px"},attrs:{shadow:"never"}},[n("el-form",{attrs:{size:"medium",inline:!0,model:e.formSearch}},[n("el-form-item",{attrs:{label:"账户名"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入账户名"},model:{value:e.formSearch.account,callback:function(t){e.$set(e.formSearch,"account",t)},expression:"formSearch.account"}})],1),n("el-form-item",{attrs:{label:"所属部门"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择所属部门"},model:{value:e.formSearch.dept_id,callback:function(t){e.$set(e.formSearch,"dept_id",t)},expression:"formSearch.dept_id"}},e._l(e.departmentOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.dept_name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"角色名称"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择角色名称"},model:{value:e.formSearch.role_id,callback:function(t){e.$set(e.formSearch,"role_id",t)},expression:"formSearch.role_id"}},e._l(e.roleNameOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.role_name,value:e.id}})})),1)],1),n("el-form-item",[n("el-button",{staticClass:"searchBtn",on:{click:e.searchData}},[e._v("查询")])],1),n("el-form-item",[n("el-button",{staticClass:"resetBtn",on:{click:e.resetData}},[e._v("重置")])],1),n("el-form-item",[n("el-button",{staticClass:"searchBtn",on:{click:e.handleAddRole}},[e._v("新增")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-row-class-name":"my-header-bg"},on:{"selection-change":e.handleSelectionChange}},[e._v(" > "),n("el-table-column",{attrs:{type:"index",align:"center","header-align":"center",label:"序号",width:"100"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"账户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.account)+" ")]}}])}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"角色名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.role_name)+" ")]}}])}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"所属部门"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.dept_name)+" ")]}}])}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"账户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?n("span",[e._v("禁用")]):n("span",[e._v("正常")])]}}])}),n("el-table-column",{attrs:{"header-align":"center",align:"left",label:"账号描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.remark)+" ")]}}])}),n("el-table-column",{attrs:{align:"center","header-align":"center",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("iconBtn",{ref:"iconBtn",attrs:{iconClass:"el-icon-edit-outline",effect:"dark",content:"编辑",placement:"top"},on:{click:function(n){return e.handleEdit(t)}}}),n("iconBtn",{ref:"iconBtn",attrs:{iconClass:"el-icon-mobile-phone",effect:"dark",content:"绑定手机",placement:"top"},on:{click:function(n){return e.showPhoneDialog(t.row.id)}}}),n("iconBtn",{ref:"iconBtn",attrs:{iconClass:"el-icon-delete",effect:"dark",content:"删除",placement:"top"},on:{click:function(n){return e.handleDelete(t.row.id)}}})]}}])})],1),n("el-row",{staticClass:"mt-30",attrs:{type:"flex",justify:"center"}},[n("el-pagination",{attrs:{background:"","current-page":e.pageNumber,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:" total, prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"修改账号":"新增账号",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleCancel}},[n("el-form",{ref:"accountFormRef",attrs:{size:"medium",model:e.accountForm,rules:e.accountFormRules,"label-width":"100px","label-position":"right"}},[n("el-form-item",{attrs:{label:"账户名",prop:"account"}},[n("el-input",{attrs:{placeholder:"请输入账户名"},model:{value:e.accountForm.account,callback:function(t){e.$set(e.accountForm,"account",t)},expression:"accountForm.account"}})],1),n("el-form-item",{attrs:{label:"角色名称",prop:"role_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色名称"},model:{value:e.accountForm.role_id,callback:function(t){e.$set(e.accountForm,"role_id",t)},expression:"accountForm.role_id"}},e._l(e.roleNameOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.role_name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"所属部门",prop:"dept_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属部门"},model:{value:e.accountForm.dept_id,callback:function(t){e.$set(e.accountForm,"dept_id",t)},expression:"accountForm.dept_id"}},e._l(e.departmentOptions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.dept_name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"账户状态",prop:"status"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择账户状态",disabled:"new"===e.dialogType},model:{value:e.accountForm.status,callback:function(t){e.$set(e.accountForm,"status",t)},expression:"accountForm.status"}},[n("el-option",{attrs:{label:"禁用",value:1}}),n("el-option",{attrs:{label:"正常",value:0}})],1)],1),n("el-form-item",{attrs:{label:"账号描述"}},[n("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入账号描述"},model:{value:e.accountForm.remark,callback:function(t){e.$set(e.accountForm,"remark",t)},expression:"accountForm.remark"}})],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{staticClass:"cancelBtn",on:{click:e.handleCancel}},[e._v("返回")]),n("el-button",{staticClass:"confirmBtn",on:{click:e.confirmAccount}},[e._v("确定")])],1)],1)],1),n("el-dialog",{attrs:{visible:e.dialogVisiblePhone,title:"绑定手机号",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisiblePhone=t},close:e.handleCancelPhone}},[n("el-form",{ref:"phoneFormRef",attrs:{model:e.phoneForm,"label-width":"100px",size:"medium","label-position":"right"}},e._l(e.phoneForm.phoneNumber,(function(t,r){return n("el-form-item",{key:r,attrs:{label:"手机号"+(r+1),prop:"phoneNumber."+r+".value",rules:{required:!0,trigger:"blur",validator:e.checkPhone}}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:20}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{clearable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{key:r,attrs:{label:"用户名"+(r+1),prop:"phoneNumber."+r+".name",rules:{required:!0,message:"请输入用户名",trigger:"blur"}}},[n("el-input",{attrs:{clearable:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1)],1)],1)],1),n("el-col",{attrs:{span:3}},[n("el-button",{staticClass:"deletBtn",on:{click:function(n){return n.preventDefault(),e.removePhone(t)}}},[e._v("删除")])],1)],1)],1)})),1),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-button",{staticClass:"confirmBtn",attrs:{plain:""},on:{click:e.addPhone}},[e._v("新增手机号")]),n("el-button",{staticClass:"confirmBtn",on:{click:function(t){return e.submitFormPhone("phoneForm")}}},[e._v("确定")])],1)],1)],1)},a=[],o=n("1da1"),c=n("5530"),i=(n("96cf"),n("d81d"),n("b0c0"),n("d3b7"),n("159b"),n("a434"),n("ed08")),l=n("ee70"),s=n("b775");function u(e){return Object(s["a"])({url:"/usergroup/sysUserGroupQueryPage",method:"get",params:e})}function d(e){return Object(s["a"])({url:"/usergroup/sysUserGroupInsert",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/usergroup/sysUserGroupUpdate",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/user/sysUserInsert",method:"post",data:e})}function h(e){return Object(s["a"])({url:"/user/sysUserDelete",method:"get",params:{phone:e}})}function f(e){return Object(s["a"])({url:"/usergroup/sysGetUserGroupPhone",method:"get",params:{id:e}})}function b(e){return Object(s["a"])({url:"usergroup/sysUserGroupDelete",method:"get",params:{ids:e}})}var g=n("0e8f"),v=n("cc5e"),y={account:"",role_id:"",dept_id:"",status:0,remark:""},k={components:{iconBtn:l["a"]},data:function(){return{checkPhone:i["a"],phoneId:"",formSearch:{account:"",dept_id:"",role_id:""},departmentOptions:[],roleNameOptions:[],total:0,pageNumber:1,pageSize:10,tableData:[],multipleSelection:[],accountForm:Object.assign({},y),dialogVisible:!1,dialogType:"new",accountFormRules:{account:[{required:!0,message:"请输入账户名",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色名称",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},dialogVisiblePhone:!1,phoneForm:{phoneNumber:[{value:"",name:""}]}}},mounted:function(){},created:function(){this.getAccountList(),this.getDepartmentList(),this.getRoleList()},methods:{getDepartmentList:function(){var e=this;Object(g["c"])().then((function(t){e.departmentOptions=t.result.depts}))},getRoleList:function(){var e=this;Object(v["d"])().then((function(t){e.roleNameOptions=t.result}))},searchData:function(){this.getAccountList()},resetData:function(){this.formSearch={},this.getAccountList()},handleSelectionChange:function(e){this.multipleSelection=e},getAccountList:function(){var e=this;u(Object(c["a"])(Object(c["a"])({},this.formSearch),{},{page_size:this.pageSize,page_index:this.isHaveSearchParams(this.formSearch)?1:this.pageNumber})).then((function(t){e.total=t.result.total,e.tableData=t.result.items}))},handleAddRole:function(){this.accountForm=Object.assign({},y),this.dialogType="new",this.dialogVisible=!0},handleEdit:function(e){this.dialogType="edit",this.dialogVisible=!0,this.accountForm=Object(i["b"])(e.row)},handleDelete:function(e){var t=this;if(!e&&0==this.multipleSelection.length)return this.$notify({message:"请选择删除项",type:"error"});var n=e?[e]:this.multipleSelection.map((function(e){return e.id}));this.$confirm("确定要删除?","警告",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b(n);case 2:r=e.sent,2e3===r.code?(t.$message({type:"success",message:r.msg}),t.getAccountList()):t.$message({type:"error",message:r.msg});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){}))},confirmAccount:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.accountFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=13;break}if(r="edit"===e.dialogType,!r){t.next=8;break}return t.next=5,m(e.accountForm);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,d(e.accountForm);case 10:t.t0=t.sent;case 11:a=t.t0,2e3===a.code?(e.$notify({message:a.msg,type:"success"}),e.dialogVisible=!1,e.getAccountList()):e.$notify({message:a.msg,type:"error"});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleCancel:function(){this.dialogVisible=!1,this.$refs.accountFormRef.resetFields()},handleSizeChange:function(e){this.pageNumber=1,this.pageSize=e,this.getAccountList()},handleCurrentChange:function(e){this.pageNumber=e,this.getAccountList()},showPhoneDialog:function(e){var t=this;this.phoneId=e,this.dialogVisiblePhone=!0,f(e).then((function(e){e.result.length>0?(t.phoneForm.phoneNumber=e.result,t.phoneForm.phoneNumber=t.phoneForm.phoneNumber.map((function(e){return{value:e.phone,id:e.id,name:e.name}}))):e.result.length<1&&(t.phoneForm.phoneNumber=[{value:"",name:""}])}))},submitFormPhone:function(){var e=this;this.$refs.phoneFormRef.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,p({phone:e.phoneForm.phoneNumber.map((function(e){return e})),group_id:e.phoneId});case 3:r=t.sent,2e3===r.code?(e.$notify({type:"success",message:r.msg}),e.dialogVisiblePhone=!1):e.$notify({type:"error",message:r.msg}),t.next=9;break;case 7:return console.log("error submit!!"),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removePhone:function(e){var t=this;this.$confirm("确定要删除？","警告",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=-1,t.phoneForm.phoneNumber.forEach((function(t,n){e.value==t.value&&(r=n)})),-1!==r&&(t.phoneForm.phoneNumber.splice(r,1),h(e.value).then((function(e){2e3===e.code?t.$notify({type:"success",message:e.msg}):t.$notify({type:"error",message:e.msg})})));case 3:case"end":return n.stop()}}),n)})))).catch((function(e){}))},addPhone:function(){this.phoneForm.phoneNumber.push({value:""})},handleCancelPhone:function(){this.dialogVisiblePhone=!1,this.$refs.phoneFormRef.resetFields()}}},_=k,w=(n("8c77"),n("2877")),F=Object(w["a"])(_,r,a,!1,null,"88a0555c",null);t["default"]=F.exports},a59e:function(e,t,n){},cc5e:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return u}));var r=n("b775");function a(){return Object(r["a"])({url:"/menu/sysTreeMenuQuery",method:"get"})}function o(e){return Object(r["a"])({url:"/role/sysRoleQueryPage",method:"get",params:e})}function c(){return Object(r["a"])({url:"/role/sysRoleQuery",method:"get"})}function i(e){return Object(r["a"])({url:"/role/sysRoleInsert",method:"post",data:e})}function l(e){return Object(r["a"])({url:"role/sysRoleUpdate",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/role/sysRoleDelete",method:"get",params:{ids:e}})}function u(e){return Object(r["a"])({url:"/interface/sysRoleInterfaceInsert",method:"post",data:e})}},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n("53ca");n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("1276"),n("159b"),n("b64b");function a(e){if(!e&&"object"!==Object(r["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Object(r["a"])(e[n])?t[n]=a(e[n]):t[n]=e[n]})),t}var o=function(e,t,n){var r=/(^1[3|4|5|6|7|8|9]\d{9}$)|(^09\d{8}$)/;t?r.test(t)?n():n(new Error("请输入正确的手机号")):n(new Error("手机号不能为空"))}}}]);