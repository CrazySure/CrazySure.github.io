(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c638a724"],{"0e8f":function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return c}));var n=r("b775");function a(){return Object(n["a"])({url:"/dept/getDeptTree",method:"get"})}function o(t){return Object(n["a"])({url:"/dept/sysDeptInsert",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/dept/sysDeptUpdate ",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/dept/sysDeptDelete",method:"get",params:{ids:t}})}function c(t){return Object(n["a"])({url:"/dept/SysDeptQuery",method:"get",params:t})}},"36f0":function(t,e,r){},"47c0":function(t,e,r){"use strict";r("36f0")},"895f":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"report-search-container"},[r("el-card",{staticStyle:{"margin-top":"-20px"},attrs:{shadow:"never"}},[r("el-form",{attrs:{size:"medium",inline:!0,model:t.formSearch}},[r("el-form-item",{attrs:{label:"文章分类"}},[r("el-select",{attrs:{multiple:"","collapse-tags":"",clearable:"",placeholder:"请选择文章分类"},model:{value:t.formSearch.articleType,callback:function(e){t.$set(t.formSearch,"articleType",e)},expression:"formSearch.articleType"}},t._l(t.articleTypeOptions,(function(t,e){return r("el-option",{key:e,attrs:{label:t.item_text,value:t.item_value}})})),1)],1),r("el-form-item",{attrs:{label:"上报日期"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formSearch.date,callback:function(e){t.$set(t.formSearch,"date",e)},expression:"formSearch.date"}})],1),r("el-form-item",[r("el-button",{staticClass:"searchBtn",on:{click:t.searchData}},[t._v("查询")])],1),r("el-form-item",[r("el-button",{staticClass:"resetBtn",on:{click:t.resetData}},[t._v("重置")])],1),r("el-form-item",[r("el-button",{staticClass:"expressBtn",on:{click:t.handleExport}},[t._v("导出")])],1)],1)],1),r("el-card",{attrs:{shadow:"never"}},[t.tableData.length>0?r("StackedChart",{attrs:{echartsData:t.tableData.length>0?t.tableData.map((function(t){return t.report_count})):[0],totalReportNumberData:t.tableData.map((function(t){return t.total_count})),xAxisTitle:t.tableData.map((function(t){return t.name})),echartTitle:{text:"文章分类图",left:"45%"}}}):t._e()],1),r("el-card",{attrs:{shadow:"never"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-row-class-name":"my-header-bg"}},[r("el-table-column",{attrs:{type:"index",label:"排名",width:"80",align:"center","header-align":"center"}}),r("el-table-column",{attrs:{align:"center","header-align":"center",sortable:"",prop:"name",label:"文章分类",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"}},[r("div",{staticClass:"textHover",on:{click:function(r){return t.goToDetails(e.row)}}},[t._v(" "+t._s(e.row.name)+" ")])])]}}])}),r("el-table-column",{attrs:{align:"center","header-align":"center",sortable:"",prop:"report_count","sort-method":function(e,r){return t.sortMethod(e,r,"report_count")},label:"上报文章数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_count)+" ")]}}])}),r("el-table-column",{attrs:{align:"center","header-align":"center",sortable:"",prop:"total_count","sort-method":function(e,r){return t.sortMethod(e,r,"total_count")},label:"采用文章数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.total_count)+" ")]}}])}),r("el-table-column",{attrs:{"header-align":"center",align:"center",sortable:"",prop:"media_count","sort-method":function(e,r){return t.sortMethod(e,r,"media_count")},label:"新媒体采用数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.media_count)+" ")]}}])}),r("el-table-column",{attrs:{"header-align":"center",align:"center",sortable:"",prop:"district_count","sort-method":function(e,r){return t.sortMethod(e,r,"district_count")},label:"区刊采用数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.district_count)+" ")]}}])}),r("el-table-column",{attrs:{"header-align":"center",align:"center",sortable:"",prop:"city_count","sort-method":function(e,r){return t.sortMethod(e,r,"city_count")},label:"市刊采用数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.city_count)+" ")]}}])}),r("el-table-column",{attrs:{"header-align":"center",align:"center",sortable:"",prop:"environment_count","sort-method":function(e,r){return t.sortMethod(e,r,"environment_count")},label:"生态环境部数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.environment_count)+" ")]}}])}),r("el-table-column",{attrs:{"header-align":"center",align:"center",sortable:"",prop:"leader_count","sort-method":function(e,r){return t.sortMethod(e,r,"leader_count")},label:"领导批示数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.leader_count)+" ")]}}])})],1)],1)],1)},a=[],o=r("1da1"),i=(r("a9e3"),r("a15b"),r("d3b7"),r("3ca3"),r("ddb0"),r("d81d"),r("96cf"),r("ed08"),r("e26f")),u=r("e56e"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bar-chart-container"},[r("div",{style:{width:t.width,height:t.height},attrs:{id:"main"}})])},s=[],l=r("313e"),d={props:{width:{type:String,default:"100%"},height:{type:String,default:"300px"},echartsData:{type:Array,default:function(){return[0]}},totalReportNumberData:{type:Array,default:function(){return[]}},totalReportScoreData:{type:Array,default:function(){return[]}},xAxisTitle:{type:Array,default:function(){return[]}},echartTitle:{type:Object,default:{text:"",left:"left"}}},data:function(){return{myChart:null,myOptions:{xAxis:{data:[],axisLabel:{color:"#000000",fontSize:12,interval:0,rotate:20}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},toolbox:{feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}}},yAxis:{type:"value",minInterval:1},title:{text:"",left:""},series:[{type:"bar",data:[],itemStyle:{color:function(t){var e=["#5470c6","#91cc75"];return e[0]}}}]}}},mounted:function(){this.initCharts()},updated:function(){this.initCharts()},watch:{echartsData:{handler:function(t,e){t!==e&&this.initCharts()},deep:!0}},methods:{initCharts:function(){this.myChart=l["a"](document.getElementById("main")),this.myChart.setOption(this.myOptions),this.myChart.setOption({legend:{orient:"vertical",x:"right",y:"10%"},xAxis:{data:this.xAxisTitle},title:{text:this.echartTitle.text,left:this.echartTitle.left,textStyle:{fontSize:28,fontWeight:"bold"}},grid:{bottom:"35%"},dataZoom:[{type:"inside"},{type:"slider",top:"80%"}],series:[{name:"上报文章数",type:"bar",stack:"total",data:this.echartsData},{name:"采用文章数",type:"bar",stack:"total",data:this.totalReportNumberData}]}),window.addEventListener("resize",this.onResize)},onResize:function(){this.myChart.resize()}}},f=d,m=r("2877"),p=Object(m["a"])(f,c,s,!1,null,null,null),h=p.exports,b=r("0e8f"),y={components:{StackedChart:h},data:function(){return{formSearch:{articleType:[],department:[],date:[]},articleTypeOptions:[],departmentOptions:[],total:0,pageNumber:1,pageSize:10,tableData:[]}},mounted:function(){this.getpreDate(),this.getArticleList(),this.getArticleTypeList(),this.getDepartmentList()},methods:{getpreDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth();0==r&&(r=12,e-=1),r<10&&(r="0"+r);var n=new Date(e,r,0);this.dateValue=[e+"-"+r+"-01",e+"-"+r+"-"+n.getDate()]},getArticleTypeList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["e"])("ARTICLE_CLASSIFICATION");case 2:r=e.sent,t.articleTypeOptions=r.result;case 4:case"end":return e.stop()}}),e)})))()},getDepartmentList:function(){var t=this;Object(b["c"])().then((function(e){t.departmentOptions=e.result.depts}))},searchData:function(){this.getArticleList()},resetData:function(){this.formSearch.articleType=[],this.formSearch.department=[],this.formSearch.date=[],this.getArticleList()},sortMethod:function(t,e,r){this.pageIndex=1;var n=Number(t[r]),a=Number(e[r]);return console.log(n,a),n>a?-1:1},getArticleList:function(){var t=this;Object(i["s"])({types:this.formSearch.articleType.length>0?this.formSearch.articleType.join(","):[],dept_id:this.formSearch.department.length>0?this.formSearch.department.join(","):[],startTime:this.formSearch.date?this.formSearch.date[0]:void 0,endTime:this.formSearch.date?this.formSearch.date[1]:void 0,page_size:this.pageSize,page_index:this.pageNumber}).then((function(e){t.total=e.result.total,t.tableData=e.result.items}))},handleExport:function(){var t=this;Promise.all([r.e("chunk-433e0a57"),r.e("chunk-093c51a7")]).then(r.bind(null,"4bf8")).then((function(e){var r=["文章分类","上报文章数","采用文章数","新媒体平台采用数","区刊采用数","市刊采用数","生态环境部采用数","领导批示信息数"],n=["name","report_count","total_count","media_count","district_count","city_count","environment_count","leader_count"],a=t.formatJson(n,t.tableData);e.export_json_to_excel({header:r,data:a,filename:"积分统计-分类-"+t.$moment().format("yyyyMMDD")})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?parseTime(e[t]):e[t]}))}))},handleSizeChange:function(t){this.pageNumber=1,this.pageSize=t,this.getArticleList()},handleCurrentChange:function(t){this.pageNumber=t,this.getArticleList()},goToDetails:function(t){this.$router.push({name:"TypeDetails",query:{details:t,date:this.dateValue}})}}},g=y,_=(r("47c0"),Object(m["a"])(g,n,a,!1,null,"32c6a18f",null));e["default"]=_.exports},e26f:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"f",(function(){return o})),r.d(e,"h",(function(){return i})),r.d(e,"o",(function(){return u})),r.d(e,"e",(function(){return c})),r.d(e,"v",(function(){return s})),r.d(e,"x",(function(){return l})),r.d(e,"n",(function(){return d})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return m})),r.d(e,"i",(function(){return p})),r.d(e,"m",(function(){return h})),r.d(e,"b",(function(){return b})),r.d(e,"u",(function(){return y})),r.d(e,"y",(function(){return g})),r.d(e,"z",(function(){return _})),r.d(e,"p",(function(){return v})),r.d(e,"w",(function(){return O})),r.d(e,"g",(function(){return D})),r.d(e,"j",(function(){return j})),r.d(e,"k",(function(){return S})),r.d(e,"q",(function(){return w})),r.d(e,"r",(function(){return x})),r.d(e,"l",(function(){return T})),r.d(e,"s",(function(){return k})),r.d(e,"t",(function(){return A}));var n=r("b775");function a(t){return Object(n["a"])({url:"/information_report/informationReportInsert",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/information_report/informationReportUpdate",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/information_report/queryReportByStatus",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/information_report/queryReportInfoAnnouncemet",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/information_report/informationReportDelete",method:"get",params:{id:t}})}function s(t){return Object(n["a"])({url:"/information_report/informationReportReturn",method:"get",params:{id:t}})}function l(t){return Object(n["a"])({url:"/information_use/userQueryByRepId",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/information_push/queryPushUse",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/information_approve/informationApproveQueryPageById",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/information_report/informationReportApprove",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/information_report/queryReportAndTypesById",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/information_push/queryPushList",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/information_push/informationPushInsert",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/information_use/queryUseList",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/information_use/useInsert",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/information_use/useRevoke",method:"get",params:{report_id:t}})}function v(t){return Object(n["a"])({url:"/score_dept/scoreStatisticsByDept",method:"get",params:t})}function O(t){return Object(n["a"])({url:"/information_notifica/infoNotificationSave",method:"post",data:t})}function D(){return Object(n["a"])({url:"/usergroup/sysUserGetUserInfo",method:"get"})}function j(t){return Object(n["a"])({url:"/score_dept/deptDeductScoreDetail",method:"get",params:t})}function S(t){return Object(n["a"])({url:"/score_dept/scoreStatisticsByDeptDetail",method:"get",params:t})}function w(t){return Object(n["a"])({url:"/scorePerson/scoreStatisticsByPerson",method:"get",params:t})}function x(t){return Object(n["a"])({url:"/scorePerson/scoreStatisticsByPersonTop",method:"get",params:t})}function T(t){return Object(n["a"])({url:"/scorePerson/scoreStatisticsByPersonDetail",method:"get",params:t})}function k(t){return Object(n["a"])({url:"/scoreType/scoreStatisticsByTypeList",method:"get",params:t})}function A(t){return Object(n["a"])({url:"/scoreType/scoreStatisticsByTypeDetail",method:"get",params:t})}},e56e:function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return s})),r.d(e,"g",(function(){return l})),r.d(e,"h",(function(){return d}));var n=r("b775");function a(t){return Object(n["a"])({url:"/dict/queryDictItembyCode",method:"get",params:{code:t}})}function o(t){return Object(n["a"])({url:"/dict/queryDictItemArticle",method:"get",params:{code:t}})}function i(t){return Object(n["a"])({url:"/dict/queryDictItemByCodePage",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/dict/sysDictQueryPage",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/dict/sysDictItemInsert",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/dict/sysDictItemUpdate",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/dict/sysDictItemById",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/dict/sysDictItemDelete",method:"get",params:{ids:t}})}},ed08:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o}));var n=r("53ca");r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("1276"),r("159b"),r("b64b");function a(t){if(!t&&"object"!==Object(n["a"])(t))throw new Error("error arguments","deepClone");var e=t.constructor===Array?[]:{};return Object.keys(t).forEach((function(r){t[r]&&"object"===Object(n["a"])(t[r])?e[r]=a(t[r]):e[r]=t[r]})),e}var o=function(t,e,r){var n=/(^1[3|4|5|6|7|8|9]\d{9}$)|(^09\d{8}$)/;e?n.test(e)?r():r(new Error("请输入正确的手机号")):r(new Error("手机号不能为空"))}}}]);