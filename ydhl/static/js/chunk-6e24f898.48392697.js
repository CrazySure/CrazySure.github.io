(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e24f898"],{"0aa2":function(e,t,n){},1192:function(e,t,n){"use strict";n("6fd9")},3329:function(e,t,n){},"4d96":function(e,t,n){"use strict";n("7944")},"4ec9":function(e,t,n){"use strict";var i=n("6d61"),a=n("6566");e.exports=i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},"5a82":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var i=n("b775");function a(e){return Object(i["a"])({url:"/nurse/bedArrangement/getPatientList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/nurse/bedArrangement/getPatientInfo",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/nurse/bedArrangement/queryBedNumByCode",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/nurse/bedArrangement/querySameSexBed",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/nurse/bedArrangement/queryDoctor",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/nurse/bedArrangement/queryNurse",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/nurse/bedArrangement/saveBedArrangement",method:"post",data:e})}function c(){return Object(i["a"])({url:"/nurse/bedArrangement/queryBedType",method:"post"})}function m(e){return Object(i["a"])({url:"/nurse/bedArrangement/queryPaientBedStatus",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/nurse/bedArrangement/getPatientInfoById",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/nurse/bedArrangement/changeBed",method:"post",data:e})}},"5aef":function(e,t,n){},"5f25":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"window-resize",rawName:"v-window-resize"}],staticClass:"app-container"},[n("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:"small"}},[n("el-form-item",{attrs:{label:"住院号",prop:"name"}},[n("el-input",{attrs:{placeholder:"住院号",clearable:"",size:"small"},model:{value:e.queryParams.recordNum,callback:function(t){e.$set(e.queryParams,"recordNum",t)},expression:"queryParams.recordNum"}})],1),n("el-form-item",{attrs:{label:"床号",prop:"type"}},[n("el-input",{attrs:{placeholder:"床号",clearable:"",size:"small"},model:{value:e.queryParams.bedNum,callback:function(t){e.$set(e.queryParams,"bedNum",t)},expression:"queryParams.bedNum"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",disabled:e.isLoading},on:{click:function(t){return e.query()}}},[e._v("查询")])],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showDistributionBed()}}},[e._v("分配床位")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showOrderBrowsing()}}},[e._v("医嘱浏览")])],1)],1),n("el-row",{staticClass:"number-box",attrs:{data:e.countPatientNum}},[n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.count))]),n("span",[e._v("当前床位总数")])]),n("div",{staticClass:"inner-box patient-number"},[n("div",[e._v(e._s(e.countPatientNum.patientCount))]),n("span",[e._v("已有患者数量")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.countAddPatitent))]),n("span",[e._v("入院人数")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.inAreaPatientCount))]),n("span",[e._v("转入人数")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.outAreaPatientCount))]),n("span",[e._v("转出人数")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.countOutPatient))]),n("span",[e._v("出院人数")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.countSpecPatient))]),n("span",[e._v("病危/病重")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.countSuryPatient))]),n("span",[e._v("预术")])]),n("div",{staticClass:"inner-box"},[n("div",[e._v(e._s(e.countPatientNum.surgerToday))]),n("span",[e._v("今日手术")])])]),n("el-main",{staticStyle:{height:"calc(100% - 117px)","overflow-y":"auto"}},e._l(e.diseaseArea,(function(t,i){return n("div",{key:i,staticClass:"disease-area"},[n("div",{staticClass:"area-name"},[n("div",[n("span",[e._v(e._s(t.areaName))]),e._v(" 病区")]),n("div",[n("span",[e._v(e._s(t.roomNo))]),e._v(" 房")])]),n("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"1470px"}},e._l(t.subArr,(function(t,i){return n("div",{key:i},[n("bed-information",{attrs:{info:t,selectedId:e.selectedCardId},on:{selectedCardPatientId:function(t){return e.updateSelectedCard(t)},"refresh-bed-plan":e.queryBedArrangementAll}})],1)})),0)])})),0),e.distributionBedVisible?n("DistributionBed",{ref:"DistributionBed"}):e._e()],1)},a=[],r=(n("d3b7"),n("159b"),n("4ec9"),n("3ca3"),n("ddb0"),n("4de4"),n("b775"));function o(e){return Object(r["a"])({url:"/nurse/nurseStation/countPatientNum",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/nurse/nurseStation/list",method:"get",params:e})}function d(e){return new Promise((function(e,t){setTimeout((function(){e({data:{totalOrdersNum:[{age:null,areaName:null,bedNo:0,bedNum:null,bedNumber:null,deptName:null,dischargeMed:null,dosage:null,execTime:null,freq:null,inpPatientRegId:"BFBEC60A8ADB30CCE055000000000001",medRecerdNo:null,noDrug:null,numc:null,nurseId:null,nurseName:null,orderGroupNo:null,orderGroupNoUuid:null,orderId:null,orderName:null,ordersNum:null,patientName:null,quantity:null,recordNum2:null,remark:null,sex:null,standard:null,standard2:null,treatmentList:null,urgent:null,usage:null},{age:null,areaName:null,bedNo:0,bedNum:null,bedNumber:null,deptName:null,dischargeMed:null,dosage:null,execTime:null,freq:null,inpPatientRegId:"98774AD143AA6670E0531F4319ACC6CC",medRecerdNo:null,noDrug:null,numc:null,nurseId:null,nurseName:null,orderGroupNo:null,orderGroupNoUuid:null,orderId:null,orderName:null,ordersNum:null,patientName:null,quantity:null,recordNum2:null,remark:null,sex:null,standard:null,standard2:null,treatmentList:null,urgent:null,usage:null},{age:null,areaName:null,bedNo:0,bedNum:null,bedNumber:null,deptName:null,dischargeMed:null,dosage:null,execTime:null,freq:null,inpPatientRegId:"59FA26AB2617E204E0536D42060A067F",medRecerdNo:null,noDrug:null,numc:null,nurseId:null,nurseName:null,orderGroupNo:null,orderGroupNoUuid:null,orderId:null,orderName:null,ordersNum:null,patientName:null,quantity:null,recordNum2:null,remark:null,sex:null,standard:null,standard2:null,treatmentList:null,urgent:null,usage:null}],redLightToBaby:[],redLight:[{age:null,areaName:null,bedNo:0,bedNum:null,bedNumber:null,deptName:null,dischargeMed:null,dosage:null,execTime:null,freq:null,inpPatientRegId:"98774AD143AA6670E0531F4319ACC6CC",medRecerdNo:null,noDrug:null,numc:null,nurseId:null,nurseName:null,orderGroupNo:null,orderGroupNoUuid:null,orderId:null,orderName:null,ordersNum:2,patientName:null,quantity:null,recordNum2:null,remark:null,sex:null,standard:null,standard2:null,treatmentList:null,urgent:null,usage:null},{age:null,areaName:null,bedNo:0,bedNum:null,bedNumber:null,deptName:null,dischargeMed:null,dosage:null,execTime:null,freq:null,inpPatientRegId:"BFBEC60A8ADB30CCE055000000000001",medRecerdNo:null,noDrug:null,numc:null,nurseId:null,nurseName:null,orderGroupNo:null,orderGroupNoUuid:null,orderId:null,orderName:null,ordersNum:1,patientName:null,quantity:null,recordNum2:null,remark:null,sex:null,standard:null,standard2:null,treatmentList:null,urgent:null,usage:null}],bedPlanNum:0}})}))}))}var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bed-info-container",on:{click:function(t){return e.selectedCard(e.info)},mouseleave:function(t){return e.selectedBlurLeave()}}},[e.isFemale(e.info)?n("el-card",{staticClass:"box-card female",on:{click:function(t){return e.selectedCard(e.info)}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("tt",[e._v(e._s(e.info.bedNum)+"床")]),n("span",{staticClass:"patient-info"},[e._v(e._s(e.getCommonField("patientName"))+" "+e._s(e.getSex(e.info))+" "+e._s(e.getAge(e.info)))]),n("div",{staticStyle:{float:"right"}},[n("i",{staticClass:"el-icon--right dropdown-custom"})])],1),n("div",{staticClass:"text item have-patient"},[n("span",[e._v("住院号："+e._s(e.getCommonField("recordNum")))]),n("span",[e._v(e._s(e.getCommonField("doctorName"))+" "+e._s(e.getCommonField("nurseName")))]),n("br"),n("span",[e._v("科室："+e._s(e.getCommonField("deptName")))]),n("span",[e._v(e._s(e.getCommonField("inpDate")))])])]):e.isMale(e.info)?n("el-card",{staticClass:"box-card male",on:{click:function(t){return e.selectedCard(e.info)}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("tt",[e._v(e._s(e.info.bedNum)+"床")]),n("span",{staticClass:"patient-info"},[e._v(e._s(e.getCommonField("patientName"))+" "+e._s(e.getSex(e.info))+" "+e._s(e.getAge(e.info)))]),n("div",{staticStyle:{float:"right"}},[n("i",{staticClass:"el-icon--right dropdown-custom"})])],1),n("div",{staticClass:"text item have-patient"},[n("span",[e._v("住院号："+e._s(e.getCommonField("recordNum")))]),n("span",[e._v(e._s(e.getCommonField("doctorName"))+" "+e._s(e.getCommonField("nurseName")))]),n("br"),n("span",[e._v("科室："+e._s(e.getCommonField("deptName")))]),n("span",[e._v(e._s(e.getCommonField("inpDate")))])])]):n("el-card",{staticClass:"box-card emptyBed",on:{click:function(t){return e.selectedCard(e.info)}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("tt",[e._v(e._s(e.info.bedNum)+"床")])],1)]),e.isShowDetail?n("div",{staticClass:"patient-details-menu"},[n("div",[n("div",{staticClass:"patientName"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.getCommonField("patientName"))+" ")]),n("span",[e._v(e._s(e.getSex(e.info)))]),n("span",[e._v(e._s(e.getAge(e.info)))]),n("i",{staticClass:"el-icon-close",staticStyle:{float:"right","font-size":"22px","margin-top":"5px"},on:{click:function(t){t.stopPropagation(),e.$nextTick((function(){e.isShowDetail=!1}))}}})])]),n("bed-info-drop-down",{attrs:{info:e.info},on:{"refresh-bed-plan":function(t){return e.$emit("refresh-bed-plan")}}}),n("div",{staticClass:"patient-details"},[n("div",[n("span",[e._v("住院科室：")]),n("span",[e._v(e._s(e.getCommonField("deptName")))])]),n("div",[n("span",[e._v("住院天数：")]),n("span",[e._v(e._s(e.getInpDays(e.info))+"天")])]),n("div",[n("span",[e._v("术后第：")]),n("span",[e._v(e._s(e.getCommonField("surDates"))+"天")])]),n("div",[n("span",[e._v("住院号：")]),n("span",[e._v(e._s(e.getCommonField("recordNum")))])]),n("div",[n("span",[e._v("主要诊断：")]),n("span",[e._v(e._s(e.getCommonField("disgName")))])]),n("div",[n("span",[e._v("本人电话：")]),n("span",[e._v(e._s(e.getCommonField("telNo")))])])]),n("div",{staticClass:"dashed-line"}),n("div",{staticClass:"patient-details"},[n("div",[n("span",[e._v(" 联系人：")]),n("span",[e._v(e._s(e.getCommonField("relationName")))])]),n("div",[n("span",[e._v(" 联系电话：")]),n("span",[e._v(e._s(e.getCommonField("relationTelNo")))])]),n("div",[n("span",[e._v("过敏史：")]),n("span",[e._v(e._s(e.getOrderItemName(e.info)))])]),n("div",[n("span",[e._v("饮食：")]),n("span",[e._v(e._s(e.getCommonField("orderName")))])]),n("div",[n("span",[e._v("患者类型：")]),n("span",[e._v(e._s(e.getCommonField("patientTypeName")))])]),n("div",[n("span",[e._v("费用类型：")]),n("span",[e._v(e._s(e.getCommonField("dictName")))])]),n("div",[n("span",[e._v("押金：")]),n("span",[e._v(e._s(e.getCommonMoney("deposit")))])]),n("div",[n("span",[e._v("费用：")]),n("span",[e._v(e._s(e.getCommonMoney("costAmount")))])]),n("div",[n("span",[e._v("余额：")]),n("span",[e._v(e._s(e.getCommonMoney("amount")))])])]),n("div",{staticClass:"dashed-line"}),n("div",{staticClass:"patient-details"},[n("div",[n("span",[e._v("责任医生：")]),n("span",[e._v(e._s(e.getCommonField("doctorName")))])]),n("div",[n("span",[e._v("责任护士：")]),n("span",[e._v(e._s(e.getCommonField("nurseName")))])]),n("div",[n("span",[e._v("分床时间：")]),n("span",[e._v(e._s(e.getCommonField("inpDate")))])])])],1),n("div")]):e._e()],1)},u=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropDown-container"},[n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openPrint}},[e._v(" 腕带打印 ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancelBed}},[e._v(" 撤销床位 ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.gotoPatientInfo}},[e._v(" 病人资料 ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeBed}},[e._v(" 患者换床 ")])],1),n("hand-print",{attrs:{"dis-play":e.handPrintDisplay,info:e.info},on:{handPrintDisplay:function(t){return e.closePrintDialog(t)}}}),e.changeBedVisible?n("change-bed",{ref:"ChangeBed",on:{"refresh-bed-plan":function(t){e.$emit("refresh-bed-plan"),e.changeBedVisible=!1}}}):e._e()],1)},m=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"title",attrs:{title:"腕带打印",visible:e.disPlay,"before-close":e.close,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.disPlay=t}}},[n("div",[e._v(" "+e._s("住院号:"+this.info.recordNum)),n("br"),e._v(" "+e._s("姓名:"+this.info.patientName)),n("br"),e._v(" "+e._s("性别:"+this.getSex(this.info))),n("br"),e._v(" "+e._s("年龄:"+this.getAge(this.info))+" ")]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doPrint}},[e._v("打 印")])],1),n("object",{staticStyle:{display:"none"},attrs:{id:"_print_lodop_obj",classid:"clsid:2105C259-1E0C-4534-8141-A753534CB4CA",width:"0",height:"0"}},[n("embed",{attrs:{id:"_print_lodop_embed",type:"application/x-print-lodop",width:"0",height:"0"}})])])},h=[],f={name:"handPrint",props:{disPlay:{required:!0,type:Boolean},info:{required:!0,type:Object}},data:function(){return{}},methods:{close:function(){this.$emit("handPrintDisplay",!1)},getSex:function(e){return"GB/T2261.1_1"===e.genderCode?"男":"GB/T2261.1_2"===e.genderCode?"女":"未知"},getAge:function(e){return(e.age?e.age:"0")+(e.ageUnitName||"")},doPrint:function(){var e="住院号:"+this.info.recordNum,t="姓名:"+this.info.patientName+"  性别:"+this.getSex(this.info)+"  年龄:"+this.getAge(this.info),n=this.info.recordNum,i=this.info.recordNum,a="30mm",r="303mm";LODOP.SET_PRINT_PAGESIZE(2,a,r,""),LODOP.ADD_PRINT_TEXTA("firstText","8.47mm","17.46mm","66.15mm","5.29mm",t),LODOP.SET_PRINT_STYLEA(0,"FontSize",11),LODOP.ADD_PRINT_TEXTA("twoText","16.4mm","16.93mm","35.00mm","5.29mm",e),LODOP.SET_PRINT_STYLEA(0,"FontSize",11),LODOP.ADD_PRINT_BARCODEA("firstCode","6.61mm","0mm","22.49mm","22.49mm","QRCode",n),LODOP.SET_PRINT_STYLEA(0,"ShowBarText",0),LODOP.ADD_PRINT_BARCODEA("twoCode","6.61mm","82.29mm","22.49mm","22.49mm","QRCode",i),LODOP.SET_PRINT_STYLEA(0,"ShowBarText",0),LODOP.ADD_PRINT_BARCODEA("threeCode","16.4mm","49.00mm","36.36mm","5.29mm","128Auto",i),LODOP.SET_PRINT_STYLEA(0,"ShowBarText",0),LODOP.PRINT(),this.close()}}},g=f,v=(n("804f"),n("2877")),b=Object(v["a"])(g,p,h,!1,null,"4fd84be7",null),N=b.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"change-bed-container"},[n("el-dialog",{attrs:{title:"患者换床",visible:e.dialogVisible,width:"550px","before-close":e.handleClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:40}},[n("el-col",{staticClass:"vertical-line",attrs:{span:9}},[n("h3",[e._v("患者信息")]),n("div",{staticClass:"patient-details"},[n("div",[n("span",[e._v("姓名：")]),n("span",[e._v(e._s(e.patientInfo.patientName))])]),n("div",[n("span",[e._v("性别：")]),n("span",[e._v(e._s(e.patientInfo.sexName))])]),n("div",[n("span",[e._v("住院号：")]),n("span",[e._v(e._s(e.patientInfo.recordNum))])]),n("div",[n("span",[e._v("入院日期：")]),n("span",[e._v(e._s(e.patientInfo.admissionDateStr))])]),n("div",[n("span",[e._v("类型：")]),n("span",[e._v(e._s(e.patientInfo.inHospName))])]),n("div",[n("span",[e._v("病区：")]),n("span",[e._v(e._s(e.patientInfo.areaName))])]),n("div",[n("span",[e._v("结算方式：")]),n("span",[e._v(e._s(e.patientInfo.costName))])]),n("div",[n("span",[e._v("当前诊断：")]),n("span",[e._v(e._s(e.patientInfo.diagName))])])])]),n("el-col",{attrs:{span:14}},[n("h3",[e._v("床位互换")]),n("el-form",{ref:"changeBedForm",attrs:{model:e.changeBedForm,rules:e.changeBedFormRules,"status-icon":!1,"hide-required-asterisk":!0,"label-suffix":":"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{"label-width":"90px",label:"当前床位号",prop:"originBedNum"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.changeBedForm.originBedNum,callback:function(t){e.$set(e.changeBedForm,"originBedNum",t)},expression:"changeBedForm.originBedNum"}})],1),n("el-form-item",{attrs:{"label-width":"90px",label:"更换为",prop:"bedNum"}},[n("autocomplete-custom",{staticStyle:{width:"100%"},attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.queryBedInfoList,suggestionsWidth:402,"trigger-on-focus":!0,debounce:0,maxlength:50,placeholder:"请选择床位号"},on:{select:e.handleSelectForBed,input:e.handleInputForBed},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("ul",{staticClass:"suggestions-ul-table-row"},[n("li",{staticStyle:{width:"80px"}},[e._v(" "+e._s(i.roomNo)+" ")]),n("li",{staticStyle:{width:"80px"}},[e._v(" "+e._s(i.bedNum)+" ")]),n("li",{staticStyle:{width:"120px"}},[e._v(" "+e._s(i.bedTypeName)+" ")]),n("li",{staticStyle:{width:"80px"}},[e._v(" "+e._s("1"==i.isMix?"是":"否")+" ")])])]}}]),model:{value:e.changeBedForm.bedNum,callback:function(t){e.$set(e.changeBedForm,"bedNum",t)},expression:"changeBedForm.bedNum"}},[n("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClickForBed},slot:"suffix"}),n("template",{slot:"headerList"},[n("li",{staticStyle:{width:"80px"}},[e._v("病房号")]),n("li",{staticStyle:{width:"80px"}},[e._v("床位号")]),n("li",{staticStyle:{width:"120px"}},[e._v("床位类型")]),n("li",{staticStyle:{width:"80px"}},[e._v("是否混住")])])],2)],1),n("el-form-item",{attrs:{"label-width":"90px",label:"床位类型",prop:"bedTypeId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择床位类型"},model:{value:e.changeBedForm.bedTypeId,callback:function(t){e.$set(e.changeBedForm,"bedTypeId",t)},expression:"changeBedForm.bedTypeId"}},e._l(e.bedTypeList,(function(e){return n("el-option",{key:e.bedType,attrs:{label:e.bedTypeName,value:e.bedType}})})),1)],1),n("el-form-item",{attrs:{"label-width":"90px",label:"主管护士",prop:"nurseName"}},[n("autocomplete-custom",{staticStyle:{width:"100%"},attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.fetchNurse,suggestionsWidth:242,"trigger-on-focus":!0,debounce:0,maxlength:50,placeholder:"请选择主管护士"},on:{select:e.handleSelectForNurse,input:e.handleInputForNurse},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("ul",{staticClass:"suggestions-ul-table-row"},[n("li",{staticStyle:{width:"80px"}},[e._v(" "+e._s(i.spell)+" ")]),n("li",{staticStyle:{width:"120px"}},[e._v(" "+e._s(i.userName)+" ")])])]}}]),model:{value:e.changeBedForm.nurseName,callback:function(t){e.$set(e.changeBedForm,"nurseName",t)},expression:"changeBedForm.nurseName"}},[n("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClickForNurse},slot:"suffix"}),n("template",{slot:"headerList"},[n("li",{staticStyle:{width:"80px"}},[e._v("拼音码")]),n("li",{staticStyle:{width:"120px"}},[e._v("姓名")])])],2)],1)],1),e.exchangeVisible?n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{"label-width":"90px",label:"同时将患者床位由"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.changeBedForm.exBedNum,callback:function(t){e.$set(e.changeBedForm,"exBedNum",t)},expression:"changeBedForm.exBedNum"}})],1),n("el-form-item",{attrs:{"label-width":"90px",label:"更换为"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.changeBedForm.originBedNum,callback:function(t){e.$set(e.changeBedForm,"originBedNum",t)},expression:"changeBedForm.originBedNum"}})],1),n("el-form-item",{attrs:{"label-width":"90px",label:"床位类型",prop:"exBedTypeId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择床位类型"},model:{value:e.changeBedForm.exBedTypeId,callback:function(t){e.$set(e.changeBedForm,"exBedTypeId",t)},expression:"changeBedForm.exBedTypeId"}},e._l(e.bedTypeList,(function(e){return n("el-option",{key:e.bedType,attrs:{label:e.bedTypeName,value:e.bedType}})})),1)],1),n("el-form-item",{attrs:{"label-width":"90px",label:"主管护士",prop:"exNurseName"}},[n("autocomplete-custom",{staticStyle:{width:"100%"},attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.fetchExNurse,suggestionsWidth:242,"trigger-on-focus":!0,debounce:0,maxlength:50,placeholder:"请选择主管护士"},on:{select:e.handleSelectForExNurse,input:e.handleInputForExNurse},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[n("ul",{staticClass:"suggestions-ul-table-row"},[n("li",{staticStyle:{width:"80px"}},[e._v(" "+e._s(i.spell)+" ")]),n("li",{staticStyle:{width:"120px"}},[e._v(" "+e._s(i.userName)+" ")])])]}}],null,!1,93541425),model:{value:e.changeBedForm.exNurseName,callback:function(t){e.$set(e.changeBedForm,"exNurseName",t)},expression:"changeBedForm.exNurseName"}},[n("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClickForExNurse},slot:"suffix"}),n("template",{slot:"headerList"},[n("li",{staticStyle:{width:"80px"}},[e._v("拼音码")]),n("li",{staticStyle:{width:"120px"}},[e._v("姓名")])])],2)],1)],1):e._e()],1)],1)],1),n("el-col",{staticClass:"prompt"},[e._v("注：如目标床位已有患者，则患者之间床位互调")])],1),n("el-row",{staticClass:"dialog-footer",attrs:{type:"flex",justify:"center"}},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.changeBedValid}},[e._v("换 床")])],1)],1)],1)},y=[],B=n("5a82"),x=n("36c2"),I=n("6bd7"),C={components:{AutocompleteCustom:x["a"]},name:"ChangeBed",data:function(){var e=this,t=function(t,n,i){""!=n&&""===e.changeBedForm.bedId?i(new Error("请单击或回车选择床位")):i()},n=function(t,n,i){""!=n&&""===e.changeBedForm.nurseId?i(new Error("请双击或回车选择主管护士")):i()},i=function(t,n,i){""!=n&&""===e.changeBedForm.exNurseId?i(new Error("请双击或回车选择主管护士")):i()};return{loading:!1,dialogVisible:!1,patientRegId:String,changeBedForm:{bedNum:"",bedId:"",nurseName:"",nurseId:"",bedTypeId:"",originBedNum:"",originBedId:"",exBedNum:"",exBedTypeId:"",exNurseName:"",exNurseId:"",bedStatus:"2",exPatientName:"",exPatientRegId:""},changeBedFormRules:{originBedNum:{required:!0,message:"病人原床位不能为空",trigger:["blur","change"]},bedNum:[{required:!0,message:"请选择床位",trigger:["blur","change"]},{validator:t,trigger:"blur"}],bedTypeId:[{required:!0,message:"床位类型不能为空",trigger:["blur","change"]},{max:50,message:"最大输入50个字符",trigger:["blur","change"]}],nurseName:[{validator:n,trigger:"blur"}],exBedTypeId:[{required:!0,message:"床位类型不能为空",trigger:["blur","change"]},{max:50,message:"最大输入50个字符",trigger:["blur","change"]}],exNurseName:[{validator:i,trigger:"blur"}]},patientInfo:{},bedTypeList:[],exchangeVisible:!1}},methods:{show:function(){var e=this;this.loading=!0,this.changeBedForm=this.$options.data().changeBedForm,this.patientInfo={},Object(B["i"])({id:this.patientRegId}).then((function(t){if(!t.data)return e.$message({showClose:!0,message:"患者已清床，请刷新页面!",duration:4e3,type:"error"}),void(e.loading=!1);Object(B["f"])().then((function(t){e.bedTypeList=t.data})),Object(B["b"])({id:e.patientRegId}).then((function(t){e.patientInfo=t.data,e.changeBedForm.originBedNum=e.patientInfo.bedNum,e.changeBedForm.originBedId=e.patientInfo.bedId,e.changeBedForm.bedId=e.patientInfo.bedId,e.changeBedForm.bedNum=e.patientInfo.bedNum,e.changeBedForm.bedTypeId=e.patientInfo.bedType,e.changeBedForm.nurseId=e.patientInfo.primaryNurse,e.changeBedForm.nurseName=e.patientInfo.primaryNurseName,e.loading=!1})),e.dialogVisible=!0}))},handleClose:function(e){this.$confirm("确认关闭？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){e()})).catch((function(e){}))},queryBedInfoList:function(e,t){Object(B["e"])({name:e,occupancy:1,isChangeOrPlan:"1",genderCode:this.patientInfo.genderCode}).then((function(e){t(e.data)}))},handleSelectForBed:function(e){var t=this;Object(I["b"])(e.patientStatus)||"PH0013_02"==e.patientStatus?"0"==e.isMix?Object(B["j"])({genderCode:this.patientInfo.genderCode,roomNo:e.roomNo}).then((function(n){Object(I["b"])(n.data)||n.data.forEach((function(e){t.patientInfo.genderCode==e||t.$message({showClose:!0,message:"目标床位所在病房存在异性病人,请选择其他床位!",duration:4e3,type:"error"})})),t.existsPatientHandle(e)})):this.existsPatientHandle(e):this.$message({showClose:!0,message:e.patientName+"已出院，不能进行换床操作!",duration:4e3,type:"error"})},handleInputForBed:function(){this.changeBedForm.bedId="",this.changeBedForm.bedTypeId=""},handleIconClickForBed:function(){this.changeBedForm.bedNum="",this.changeBedForm.bedId="",this.changeBedForm.bedTypeId=""},fetchNurse:function(e,t){Object(B["h"])({nurseValue:e}).then((function(e){t(e.data)}))},fetchExNurse:function(e,t){Object(B["h"])({nurseValue:e}).then((function(e){t(e.data)}))},handleSelectForNurse:function(e){this.changeBedForm.nurseName=e.userName,this.changeBedForm.nurseId=e.userId},handleInputForNurse:function(){this.changeBedForm.nurseId=""},handleIconClickForNurse:function(){this.changeBedForm.nurseName="",this.changeBedForm.nurseId=""},handleSelectForExNurse:function(e){this.changeBedForm.exNurseName=e.userName,this.changeBedForm.exNurseId=e.userId},handleInputForExNurse:function(){this.changeBedForm.exNurseId=""},handleIconClickForExNurse:function(){this.changeBedForm.exNurseName="",this.changeBedForm.exNurseId=""},existsPatientHandle:function(e){"2"==e.bedStatus&&this.patientInfo.bedId!=e.id?(this.exchangeVisible=!0,this.changeBedForm.exBedNum=e.bedNum,this.changeBedForm.exBedTypeId=this.patientInfo.bedType,this.handleSelectForExNurse({userName:this.changeBedForm.nurseName,userId:this.changeBedForm.nurseId}),this.changeBedForm.exPatientName=e.patientName,this.changeBedForm.exPatientRegId=e.regId):(this.exchangeVisible=!1,this.changeBedForm.exPatientRegId=""),this.changeBedForm.bedStatus=e.bedStatus,this.changeBedForm.bedNum=e.bedNum,this.changeBedForm.bedId=e.id,this.changeBedForm.bedTypeId=e.bedType,this.handleSelectForNurse({userName:e.nurseName,userId:e.primaryNurse})},changeBedValid:function(){var e=this;this.$refs.changeBedForm.validate((function(t){if(t){if(e.patientInfo.bedId==e.changeBedForm.bedId&&e.changeBedForm.bedTypeId==e.patientInfo.bedType&&e.changeBedForm.nurseId==e.patientInfo.primaryNurse)return e.$message({showClose:!0,message:"病人原床位号、原床位类型和原主管护士未改变!",duration:4e3,type:"error"}),!1;"2"===e.changeBedForm.bedStatus?e.changeBedForm.originBedId==e.changeBedForm.bedId?e.patientInfo.bedType!=e.changeBedForm.bedTypeId&&e.patientInfo.primaryNurse==e.changeBedForm.nurseId?e.$confirm("原床位号未改变,只更换床位类型,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.changeBed()})):e.patientInfo.bedType==e.changeBedForm.bedTypeId&&e.patientInfo.primaryNurse!=e.changeBedForm.nurseId?e.$confirm("原床位号未改变,只更换主管护士,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.changeBed()})):e.patientInfo.bedType!=e.changeBedForm.bedTypeId&&e.patientInfo.primaryNurse!=e.changeBedForm.nurseId&&e.$confirm("原床位号未改变,只更换床位类型和主管护士,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.changeBed()})):e.$confirm(e.changeBedForm.bedNum+"床已有患者"+e.changeBedForm.exPatientName+",是否确认互换?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.changeBed()})):e.changeBed()}}))},changeBed:function(){var e=this,t=this.changeBedForm;t.patientRegId=this.patientInfo.id,Object(B["a"])(t).then((function(t){t.data?(e.$message({showClose:!0,message:"床位更换成功!",duration:4e3,type:"success"}),e.$emit("refresh-bed-plan"),e.dialogVisible=!1):e.$message({showClose:!0,message:t.msg,duration:4e3,type:"error"})}))}},mounted:function(){}},F=C,w=(n("b290"),n("4d96"),Object(v["a"])(F,_,y,!1,null,"052bd9c9",null)),P=w.exports,T={name:"bedInfoDropDown",components:{HandPrint:N,ChangeBed:P},props:{info:{required:!0,type:Object}},data:function(){return{handPrintDisplay:!1,changeBedVisible:!1}},methods:{openPrint:function(){this.handPrintDisplay=!0},cancelBed:function(){var e=this;this.$confirm("是否确认撤销床位？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){alert(e.info.id)})).catch((function(e){}))},closePrintDialog:function(e){this.handPrintDisplay=e},gotoPatientInfo:function(){this.$router.push({path:"/inpatientInfo",query:{recordNum:this.info.recordNum}})},changeBed:function(){var e=this;this.changeBedVisible=!0,this.$nextTick((function(){e.$refs.ChangeBed.patientRegId=e.info.id,e.$refs.ChangeBed.show()}))}},mounted:function(){},beforeDestroy:function(){}},S=T,D=(n("f5f5"),Object(v["a"])(S,c,m,!1,null,null,null)),A=D.exports,O={components:{BedInfoDropDown:A},comments:{BedInfoDropDown:A},name:"bedInformation",props:{info:{required:!0,type:Object},selectedId:{type:String}},data:function(){return{patientInfo:{},isShowDetail:!1,isRedLight:!1,isRedLightToBaby:!1,isTeHu:!1,isYiHu:!1,isErHu:!1,isSanHu:!1,isBingWei:!1,isBingZhong:!1,timer:""}},methods:{isChose:function(e){return null!=e.id&&""!==e.id&&this.selectedId===e.id},isFemale:function(e){return null!=e.id&&"GB/T2261.1_2"===e.genderCode},isMale:function(e){return null!=e.id&&"GB/T2261.1_1"===e.genderCode},selectedCard:function(e){null!=e.id&&""!==e.id?(this.isShowDetail=!0,this.$emit("selectedCardPatientId",e.id)):this.$emit("selectedCardPatientId","")},selectedBlurLeave:function(){},getRoomNo:function(e){return(e.roomNo?e.roomNo+"房-":"")+(e.areaName?e.areaName:"")},getSex:function(e){return"GB/T2261.1_1"===e.genderCode?"男":"GB/T2261.1_2"===e.genderCode?"女":"未知"},getAge:function(e){return(e.age?e.age:"0")+(e.ageUnitName||"")},getCommonField:function(e){return this.info[e]?this.info[e]:""},getLight:function(){var e=this,t=this.info.id;t&&d(t).then((function(t){var n=t.data;e.isRedLight=n.redLight.length>0,e.isRedLightToBaby=n.redLightToBaby.length>0}))},getInpDays:function(e){return e.inpDays>0?e.inpDays:"1"},getOrderItemName:function(e){return e.orderItemName?e.orderItemName.substr(0,12)+"...":""},getCommonMoney:function(e){return this.info[e]?this.info[e]:"0"}},watch:{info:{deep:!0,handler:function(e,t){var n=this;console.log(e);var i=e.war;i&&i.length>0?(i.forEach((function(e){var t=e.split(",");"PH0078_04"===t[0]?n.isTeHu=!0:"PH0078_05"===t[0]?n.isYiHu=!0:"PH0078_06"===t[0]?n.isErHu=!0:"PH0078_07"===t[0]?n.isSanHu=!0:"PH0078_03"===t[0]?n.isBingWei=!0:"PH0078_02"===t[0]&&(n.isBingZhong=!0)})),console.log(this.isTeHu),console.log(this.isYiHu),console.log(this.isErHu),console.log(this.isSanHu),console.log(this.isBingWei),console.log(this.isBingZhong)):(this.isTeHu=!1,this.isYiHu=!1,this.isErHu=!1,this.isSanHu=!1,this.isBingWei=!1,this.isBingZhong=!1)}}},mounted:function(){this.timer=setTimeout(this.getLight,1e4)},beforeDestroy:function(){clearTimeout(this.timer)}},k=O,E=(n("b07c"),n("e9e6"),Object(v["a"])(k,l,u,!1,null,"3325bc8c",null)),q=E.exports,L=n("a41d"),R={components:{BedInformation:q,DistributionBed:L["a"]},data:function(){return{queryParams:{recordNum:"",bedNum:"",areaId:"3833A4F645E2602DE0530100007FC976"},selectedCardId:"",countPatientNum:{},bedPatientInfo:[],diseaseArea:[],isLoading:!1,distributionBedVisible:!1}},created:function(){var e=this.$route.query.isDisplaySideBar;void 0!==e&&""!==e&&null!==e&&this.$store.dispatch("settings/changeSetting",{key:"isDisplaySideBar",value:!1}),this.queryCountPatientNum(),this.queryBedArrangementAll()},methods:{updateSelectedCard:function(e){this.selectedCardId=e},query:function(){this.isLoading=!0,this.bedPatientInfo=[],this.queryBedArrangementAll()},queryCountPatientNum:function(){var e=this;o().then((function(t){e.countPatientNum=t.data}))},queryBedArrangementAll:function(){var e=this;s(this.queryParams).then((function(t){e.bedPatientInfo=t.data,e.diseaseArea=e.uniqueName(e.bedPatientInfo),e.diseaseArea.forEach((function(e){e.subArr=[]})),e.bedPatientInfo.forEach((function(t){e.diseaseArea.forEach((function(e){t.roomNo==e.roomNo&&e.subArr.push(t)}))})),e.isLoading=!1}))},showDistributionBed:function(){this.$router.push("/sendBed")},showOrderBrowsing:function(){this.$router.push("/ordersBrowsing")},uniqueName:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.roomNo)&&t.set(e.roomNo,1)}))}}},$=R,j=(n("64d0"),n("1192"),Object(v["a"])($,i,a,!1,null,"1678e5ab",null));t["default"]=j.exports},"5f62":function(e,t,n){},"610b":function(e,t,n){},6260:function(e,t,n){},"64d0":function(e,t,n){"use strict";n("610b")},6566:function(e,t,n){"use strict";var i=n("9bf2").f,a=n("7c73"),r=n("e2cc"),o=n("0366"),s=n("19aa"),d=n("2266"),l=n("7dd0"),u=n("2626"),c=n("83ab"),m=n("f183").fastKey,p=n("69f3"),h=p.set,f=p.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,i){s(e,u,t),h(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),c||(e.size=0),void 0!=i&&d(i,e[l],e,n)})),p=f(t),g=function(e,t,n){var i,a,r=p(e),o=v(e,t);return o?o.value=n:(r.last=o={index:a=m(t,!0),key:t,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=o),i&&(i.next=o),c?r.size++:e.size++,"F"!==a&&(r.index[a]=o)),e},v=function(e,t){var n,i=p(e),a=m(t);if("F"!==a)return i.index[a];for(n=i.first;n;n=n.next)if(n.key==t)return n};return r(u.prototype,{clear:function(){var e=this,t=p(e),n=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;t.first=t.last=void 0,c?t.size=0:e.size=0},delete:function(e){var t=this,n=p(t),i=v(t,e);if(i){var a=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=a),a&&(a.previous=r),n.first==i&&(n.first=a),n.last==i&&(n.last=r),c?n.size--:t.size--}return!!i},forEach:function(e){var t,n=p(this),i=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),r(u.prototype,n?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),c&&i(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,n){var i=t+" Iterator",a=f(t),r=f(i);l(e,t,(function(e,t){h(this,{type:i,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},"6d61":function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("94ca"),o=n("6eeb"),s=n("f183"),d=n("2266"),l=n("19aa"),u=n("861d"),c=n("d039"),m=n("1c7e"),p=n("d44e"),h=n("7156");e.exports=function(e,t,n){var f=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),v=f?"set":"add",b=a[e],N=b&&b.prototype,_=b,y={},B=function(e){var t=N[e];o(N,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(r(e,"function"!=typeof b||!(g||N.forEach&&!c((function(){(new b).entries().next()})))))_=n.getConstructor(t,e,f,v),s.REQUIRED=!0;else if(r(e,!0)){var x=new _,I=x[v](g?{}:-0,1)!=x,C=c((function(){x.has(1)})),F=m((function(e){new b(e)})),w=!g&&c((function(){var e=new b,t=5;while(t--)e[v](t,t);return!e.has(-0)}));F||(_=t((function(t,n){l(t,_,e);var i=h(new b,t,_);return void 0!=n&&d(n,i[v],i,f),i})),_.prototype=N,N.constructor=_),(C||w)&&(B("delete"),B("has"),f&&B("get")),(w||I)&&B(v),g&&N.clear&&delete N.clear}return y[e]=_,i({global:!0,forced:_!=b},y),p(_,e),g||n.setStrong(_,e,f),_}},"6fd9":function(e,t,n){},7944:function(e,t,n){},"804f":function(e,t,n){"use strict";n("5aef")},b07c:function(e,t,n){"use strict";n("0aa2")},b290:function(e,t,n){"use strict";n("3329")},bb2f:function(e,t,n){var i=n("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e9e6:function(e,t,n){"use strict";n("6260")},f183:function(e,t,n){var i=n("d012"),a=n("861d"),r=n("5135"),o=n("9bf2").f,s=n("90e3"),d=n("bb2f"),l=s("meta"),u=0,c=Object.isExtensible||function(){return!0},m=function(e){o(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,l)){if(!c(e))return"F";if(!t)return"E";m(e)}return e[l].objectID},h=function(e,t){if(!r(e,l)){if(!c(e))return!0;if(!t)return!1;m(e)}return e[l].weakData},f=function(e){return d&&g.REQUIRED&&c(e)&&!r(e,l)&&m(e),e},g=e.exports={REQUIRED:!1,fastKey:p,getWeakData:h,onFreeze:f};i[l]=!0},f5f5:function(e,t,n){"use strict";n("5f62")}}]);