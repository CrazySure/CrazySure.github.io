(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f27f298"],{3030:function(e,t,a){},"324b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"newslist-container"},[a("el-card",[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.newsType,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t,name:t}},[a("el-table",{ref:"multipleTable"+n,refInFor:!0,staticClass:"mb",staticStyle:{width:"100%"},attrs:{data:e.newsList},on:{"selection-change":e.newsChoiceChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"全选",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{width:"710"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.btnDisabled},on:{click:e.changeReadedState}},[e._v("全部标记为已读")])]}},{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"Newsshow",params:{row:JSON.stringify(t.row)}}}},[a("div",{class:["news-title",t.row.state?"":"unread"]},[a("span",[e._v("*")]),e._v("\n                                    【 "+e._s(t.row.type)+" 】 "+e._s(t.row.title)+"\n                                ")]),e._v(" "),a("div",{staticClass:"news-text"},[e._v(e._s(t.row.text))])])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.type))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"text_r"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){return e.filterAll(e.newsList,n)}}},[e._v("全部")]),e._v(" |\n                                "),a("el-link",{attrs:{underline:!1},on:{click:function(t){return e.filterUnread(e.newsList,n)}}},[e._v("未读")]),e._v(" |\n                                "),a("el-link",{attrs:{underline:!1},on:{click:function(t){return e.filterReaded(e.newsList,n)}}},[e._v("已读")])],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.time))])]}}],null,!0)})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.queryParams.page,"page-sizes":[5,10,15,20],"page-size":e.queryParams.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.newsSizeChange,"current-change":e.newsCurrentChange}})],1)})),1)],1)],1)},i=[],s=(a("ac6a"),a("b775"));function l(e){return Object(s["a"])({method:"get",url:"/news/newslist",params:e})}var r={data:function(){return{activeName:"全部消息",newsList:[],queryParams:{page:1,limit:5,type:"",state:""},total:0,newsType:[],btnDisabled:!0,multipleSelection:[]}},created:function(){this.getNewsListData()},methods:{getNewsListData:function(){var e=this;l(this.queryParams).then((function(t){e.newsList=t.data.items,e.total=t.data.total,e.newsType=t.data.newsType}))},newsSizeChange:function(e){this.queryParams.limit=e,this.getNewsListData()},newsCurrentChange:function(e){this.queryParams.page=e,this.getNewsListData()},newsChoiceChange:function(e){this.multipleSelection=e,this.btnDisabled=!0,this.multipleSelection.length>0&&(this.btnDisabled=!1)},filterAll:function(e,t){var a=this;this.$refs["multipleTable"+t][t].clearSelection(),e?e.forEach((function(e){a.$refs["multipleTable"+t][t].toggleRowSelection(e)})):this.$refs["multipleTable"+t][t].clearSelection()},filterUnread:function(e,t){var a=this;this.$refs["multipleTable"+t][t].clearSelection(),e?e.forEach((function(e){e.state||a.$refs["multipleTable"+t][t].toggleRowSelection(e)})):this.$refs["multipleTable"+t][t].clearSelection()},filterReaded:function(e,t){var a=this;this.$refs["multipleTable"+t][t].clearSelection(),e?e.forEach((function(e){e.state&&a.$refs["multipleTable"+t][t].toggleRowSelection(e)})):this.$refs["multipleTable"+t][t].clearSelection()},changeReadedState:function(){this.multipleSelection.forEach((function(e){e.state=!0}))}},watch:{activeName:function(e){var t=this;"全部消息"!==e?(this.queryParams={page:1,limit:5,type:e,state:""},l(this.queryParams).then((function(e){t.newsList=e.data.items.filter((function(e){return e.type==t.queryParams.type}))})),l(this.queryParams.type).then((function(e){var a=e.data.items.filter((function(e){return e.type==t.queryParams.type}));t.total=a.length}))):(this.queryParams={page:1,limit:5,type:"",state:""},this.getNewsListData())}}},c=r,o=(a("fdff"),a("2877")),u=Object(o["a"])(c,n,i,!1,null,"154d003d",null);t["default"]=u.exports},fdff:function(e,t,a){"use strict";var n=a("3030"),i=a.n(n);i.a}}]);