(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57dce27c"],{"14b9":function(t,e,a){},"2ac2":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF9SURBVDhPY2SAAUYGdbVMxumMrIzMDP8Y/kNFGRiYgDJA/q2p/4r//2M4CxJCaGJgEGBmZ7AHijACtSA0Qfl/fzIcA/JeQ4SggJGJwTTqF9NJBmaEGDJYzvbP/d9vhl0gNrICGV41xmxGkMlYwKdb/+cCbbwNYjODRSCAg4mFQeXvD4Zv2PCfLwwXgWo+gRSCTGUH4p9g5/1lOgUSxAaQnMfGzCnFUKKaytQh5c0YKGbFIAEOLSyAhYtRn1+bMerHawYFkA/U3Y8wHRaxYhCFyuME358xfF8v+8+WCei5m7ud/iX9+sjwGyqHE2xS/5cGiismEOffT4Yt243/d4FlcIAdZv9nAANjCYgND71f7xmOfH/OYCXjy6gEFYKDC1UMJx6u/B8LZP4C8VE9zcig4ryH6bCEEzBAoODjNYaPW3X/OQCddQEqhAmYORlCI34y/Y3+z/QfhNkEGdKhUviBgA5jH0iDhCPjIiAXaxRgAwIiFoyzgLQUhIsMGBgASr6DEGbqKqsAAAAASUVORK5CYII="},6554:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVDhPjZIxawJBEIXfm2CSIkUaCQTSBWwDIY0/wMpWK3sR/4attoKl+DNsrCyt8wuUq87GQjgnM+duuJiN5PG9Yvfm7c7uLVJ6Nmbk7BEw/iEac3KuIjohJ2H6uvpk3wPuQqTokJ3wKa03IxfJY8i9Fdm+AkZCD8ZaZF0NRC/J5S1gXGhKTlOB6BE5CqVn9cheqrDqo8ixTbbLwLtxEDmkCi+diWQNoHEzJIc1srYH9k+A8VtqbIDNDtgJIH668oAtspVaPfoDMIA7w/7lWS9Gl+yG4Q/5TgvVRQYYvlXQvVEH6n85eeXX2juJnGJ7ru/2fLUm2fS35+2E6fIt+nilusoBoxLyqx+LjFOhQrUYqA4+AQP4AstDpRNuysQrAAAAAElFTkSuQmCC"},"6cdb":function(t,e,a){},7520:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"close-btn",attrs:{to:{name:this.routeName}}},[t._v("×")])},s=[],n={props:["routeName"]},l=n,r=a("2877"),o=Object(r["a"])(l,i,s,!1,null,null,null);e["a"]=o.exports},"7db0":function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").find,n=a("44d2"),l="find",r=!0;l in[]&&Array(1)[l]((function(){r=!1})),i({target:"Array",proto:!0,forced:r},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(l)},8776:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"city-ranking-router-container"},[a("div",{staticClass:"main-card"},[a("div",{staticClass:"main-header"},[a("span",{staticClass:"main-title"},[t._v("工作排名")]),a("CloseBtn",{attrs:{routeName:"Home"}})],1),a("div",{staticClass:"city-ranking-router-body"},[a("CityRanking",{attrs:{tableData:t.tableData,cityName:t.name}})],1)])])},s=[],n=(a("b0c0"),a("7520")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-task-container"},[i("div",{staticClass:"table-box"},[i("div",{staticClass:"my-tab-header"},[i("div",{staticClass:"my-tab-header-title"},[t._v(t._s(this.value4[0].name)+"浓度与排名变化")])]),i("div",{staticClass:"my-tab-body"},[i("div",{staticClass:"block"},[i("div",{staticClass:"block-left"},[i("el-cascader",{attrs:{options:t.options1},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),i("el-button",{attrs:{type:"primary"},on:{click:t.ant}},[t._v("查询")])],1),i("div",{staticClass:"block-right"},[i("el-cascader",{attrs:{placeholder:"大兴区",options:t.options4},on:{change:t.handleChange},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}})],1)]),i("div",{staticClass:"my-table-body-content"},[i("div",{staticClass:"my-table-header"},[i("vue-seamless-scroll",{staticClass:"seamless-warp",attrs:{data:t.list,"class-option":t.classOption}},[i("div",{staticClass:"my-table-header-right"},t._l(t.list,(function(e){return i("div",{key:e.datetime},[i("div",{staticClass:"right-top"},[t._v(t._s(e.datetime||0))]),i("div",{staticClass:"right-center"},[i("div",[t._v("浓度")]),i("div",[t._v("排名")]),i("div",[t._v("环比")])]),i("div",{staticClass:"right-bottom"},[i("div",[e.value>0&&e.value<=50?i("div",{style:{background:"#00E600"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value>50&&e.value<=100?i("div",{style:{background:"#FFFF00"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value>100&&e.value<=150?i("div",{style:{background:"#FF7F00"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value>150&&e.value<=200?i("div",{style:{background:"#FF0000"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value>200&&e.value<=300?i("div",{style:{background:"#9A004A"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value>300&&e.value<=9999999?i("div",{style:{background:"#800021"}},[t._v(" "+t._s(e.value||0)+" ")]):e.value<0?i("div",{style:{background:"#666"}},[t._v(" "+t._s(e.value||"--")+" ")]):t._e()]),i("div",[t._v(t._s(e.rank||0))]),"-"==JSON.stringify(e.mom)[0]?i("div",[i("img",{style:{width:"13px"},attrs:{src:a("6554")}})]):"-"!=JSON.stringify(e.mom)[0]?i("div",[i("img",{style:{width:"13px"},attrs:{src:a("2ac2")}})]):t._e()])])})),0)])],1),t._m(0)])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-table-box"},[a("div",{staticClass:"my-table-box-text"},[t._v("排名变化图")]),a("div",{staticClass:"my-table-box-echarts",attrs:{id:"main"}})])}],o=a("2909"),u=(a("4de4"),a("7db0"),a("d81d"),a("99af"),a("b775")),m=a("313e"),c={props:{cityName:String,tableData:[]},data:function(){return{DistrictTownTab:"区",value1:["134004","4","最近一年"],options1:[{value:"134004",label:"PM2.5",children:[{value:"4",label:"月",children:[{value:"最近一年",label:"最近一年"},{value:"最近半年",label:"最近半年"}]},{value:"2",label:"日",children:[{value:"最近三个月",label:"最近三个月"},{value:"最近一个月",label:"最近一个月"}]},{value:"1",label:"小时",children:[{value:"最近三天",label:"最近三天"},{value:"最近一天",label:"最近一天"}]}]},{value:"134001",label:"TSP",children:[{value:"4",label:"月",children:[{value:"最近一年",label:"最近一年"},{value:"最近半年",label:"最近半年"}]},{value:"2",label:"日",children:[{value:"最近三个月",label:"最近三个月"},{value:"最近一个月",label:"最近一个月"}]},{value:"1",label:"小时",children:[{value:"最近三天",label:"最近三天"},{value:"最近一天",label:"最近一天"}]}]},{value:"199054",label:"TVOC",children:[{value:"4",label:"月",children:[{value:"最近一年",label:"最近一年"},{value:"最近半年",label:"最近半年"}]},{value:"2",label:"日",children:[{value:"最近三个月",label:"最近三个月"},{value:"最近一个月",label:"最近一个月"}]},{value:"1",label:"小时",children:[{value:"最近三天",label:"最近三天"},{value:"最近一天",label:"最近一天"}]}]}],startime:this.$moment().subtract(1,"years").format("YYYY-MM-01 00:00:00"),endtime:this.$moment().format("YYYY-MM-01 00:00:00"),token:"qiYrxXEv5mJPW6-dU5_wQQQivUkpjzt0ZChwA8M9JwYNNGXuecoz2NC4MuGBeBqWNBGxCD_9rXfkYMy7rQYCkDBK3eLyAZh7MrUp0sPHisiOsrJZ4-Webgiz4c2KFWXLGxsPDXqKsxULZRgkYsx_yeSmBsOKzTWNLAax1-JzQvVE3ge7QEDrEhlNk7DeItdcgUelGUMqUvj7kImu2gUS3Q==",rankid:"7",timeType:"4",varType:134004,auditflag:"0",myChart:null,myOptions:{},list:[],timeList:[],thisYear:[],lastYear:[],qoq:[],mom:[],end:0,value4:[{rank_id:4,name:"大兴区"}],options4:[]}},created:function(){this.getTableDataList(),this.getEchart(),this.initCharts()},mounted:function(){this.initCharts()},updated:function(){this.initCharts()},watch:{cityName:function(t,e){t!==e&&(this.value4[0].name=t,this.getTableDataList()),console.log(t,e)},echartsData:function(t){this.echartsData=t,this.initCharts()}},methods:{handleChange:function(t,e,a){console.log("373 value",t,e,a),this.value4[0].name=t[0].name,this.getTableDataList()},ant:function(){this.varType=this.value1[0],4==this.value1[1]&&"最近一年"==this.value1[2]&&(this.timeType=4,this.startime=this.$moment().subtract(1,"years").format("YYYY-MM-01 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-01 00:00:00")),4==this.value1[1]&&"最近半年"==this.value1[2]&&(this.timeType=4,this.startime=this.$moment(new Date).subtract(6,"months").format("YYYY-MM-01 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-01 00:00:00")),2==this.value1[1]&&"最近三个月"==this.value1[2]&&(this.timeType=2,this.startime=this.$moment(new Date).subtract(3,"months").format("YYYY-MM-DD 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-DD 00:00:00")),2==this.value1[1]&&"最近一个月"==this.value1[2]&&(this.timeType=2,this.startime=this.$moment(new Date).subtract(1,"months").format("YYYY-MM-DD 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-DD 00:00:00")),1==this.value1[1]&&"最近三天"==this.value1[2]&&(this.timeType=1,this.startime=this.$moment().subtract(3,"days").format("YYYY-MM-DD 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-DD HH:00:00")),1==this.value1[1]&&"最近一天"==this.value1[2]&&(this.timeType=1,this.startime=this.$moment().subtract(1,"days").format("YYYY-MM-DD 00:00:00"),this.endtime=this.$moment().format("YYYY-MM-DD HH:00:00")),this.getTableDataList()},getTableDataList:function(){var t=this,e={token:this.token,rankid:this.rankid,timeType:this.timeType,varType:this.varType,startime:this.startime,endtime:this.endtime,auditflag:this.auditflag};u["a"].get("https://api-adm-data-service-pre.airqualitychina.cn:9998/adm/center-rank",{params:{json:e}}).then((function(e){"[]"!=JSON.stringify(e.data.result)?(e=e.data.result,t.list=e.filter((function(e){return e.countyname==t.value4[0].name}))[0].data):t.list=[]}))},getColor:function(t){return t>0&&t<35?"#64C84C":t>35&&t<75?"#CBCD49":t>75&&t<115?"#C97C3D":t>115&&t<150||t>150&&t<250||t>250&&t<500?"#":"#666"},getEchart:function(){var t=this,e={token:this.token,rankid:"7",timeType:"4",varType:134004,startime:this.$moment(new Date).subtract(6,"months").format("YYYY-MM-DD 00:00:00"),endtime:this.$moment().format("YYYY-MM-DD 00:00:00"),auditflag:"0",is_round:"True"};u["a"].get("https://api-adm-data-service-pre.airqualitychina.cn:9998/adm/contrast",{params:{json:e}}).then((function(e){if("[]"!=JSON.stringify(e.data.result)){e=e.data.result;var a=e.find((function(t){return 4==t.admid})).data,i=100;a.length>70&&(i=50);var s=[],n=[],l=[],r=[],u=[];a.map((function(t){s.push(t.datetime),l.push(t.rank||"-"),n.push(t.qoq.rank||"-"),r.push(t["qoq-rank"]||"-"),u.push(t["mom-rank"]||"-")})),t.timeList=s,t.thisYear=l,t.lastYear=n,t.qoq=r,t.mom=u,t.end=i,e.map((function(e){t.options4=[].concat(Object(o["a"])(t.options4),[{label:e.name,value:{rank_id:e.countyid,name:e.name}}])}))}}))},initCharts:function(){this.myChart=m["init"](document.getElementById("main")),this.myChart.setOption(this.myOptions),this.myChart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#7cb5ec","#52e855","red","blue"],legend:{data:["前一年度","本年度","同比","环比"],textStyle:{color:"#fff",fontSize:21}},dataZoom:[{type:"inside",start:0,end:this.end}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff"}},axisLabel:{fontSize:12},data:this.timeList},yAxis:[{name:"排名",type:"value",splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"#fff"}},nameTextStyle:{fontSize:12,align:"left"},axisLabel:{fontSize:12}},{type:"value",name:"百分比",splitLine:{show:!1},axisLine:{lineStyle:{color:"#fff"}},nameTextStyle:{fontSize:12,align:"right"},axisLabel:{fontSize:12}}],series:[{name:"前一年度",type:"bar",data:this.lastYear},{name:"本年度",type:"bar",data:this.thisYear},{name:"同比",type:"line",yAxisIndex:1,data:this.qoq},{name:"环比",type:"line",yAxisIndex:1,data:this.mom}]}),window.addEventListener("resize",this.onResize)},onResize:function(){this.myChart.resize()}},computed:{classOption:function(){return{step:.5,hoverStop:!0,direction:2,singleHeight:0,singleWidth:0,waitTime:1e3}}}},h=c,d=(a("f721"),a("2877")),v=Object(d["a"])(h,l,r,!1,null,"893352be",null),b=v.exports,f={components:{CloseBtn:n["a"],CityRanking:b},data:function(){return{activeTab:"2",year:null,month:null,day:null,tableData:[],queryData:this.$route.query,name:this.$route.query.details.name}},watch:{$route:{handler:function(){console.log("111111111",this.$route.query.details.name),this.name=this.$route.query.details.name},deep:!0}},created:function(){this.getWorkDataList(this.activeTab,this.day,"city")},methods:{getNowDate:function(){this.year=this.$moment().format("YYYY"),this.month=this.$moment().format("YYYY-MM"),this.day=this.$moment().subtract(1,"days").format("YYYY-MM-DD")},getWorkDataList:function(t,e,a){var i=this,s={username:"api",password:"a123456b",time_type:t,time:e,rank_type:a};u["a"].get("https://api-dx-smart-city.airqualitychina.cn:9998/v1/dashboard/cmd/ranks",{params:{json:s}}).then((function(t){2e3===t.data.code&&(i.tableData=t.data.result)}))}}},y=f,Y=(a("d176"),Object(d["a"])(y,i,s,!1,null,null,null));e["default"]=Y.exports},d176:function(t,e,a){"use strict";a("6cdb")},f721:function(t,e,a){"use strict";a("14b9")}}]);
//# sourceMappingURL=chunk-57dce27c.9c840b25.js.map